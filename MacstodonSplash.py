"""Macstodon - a Mastodon client for classic Mac OSMIT LicenseCopyright (c) 2022 Scott Small and ContributorsPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associateddocumentation files (the "Software"), to deal in the Software without restriction, including without limitation therights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permitpersons to whom the Software is furnished to do so, subject to the following conditions:The above copyright notice and this permission notice shall be included in all copies or substantial portions of theSoftware.THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THEWARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS ORCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OROTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.""""""A quick note from Scott:This file has been almost copied/pasted verbatim from the MacPython IDE,which is why it looks nothing like the other source files style-wise.Changes I made here include: - updated the resources to use the Macstodon logo and give the dialog a black BG - Bugfix to the TextFont calls which were failing and causing the progress bar to not render   (the MacPython IDE is affected by this as well, lol) - Fixed the _real__import__ calls which were only passing the name and not the other params,   causing crashes when trying to run this in the IDE - Changed the text color to white and changed the text itself - Removed the easter egg"""import Dlgimport Resfrom MacstodonConstants import VERSIONsplash = Dlg.GetNewDialog(468, -1)splash.DrawDialog()import Qd, TE, Fm, sys_real__import__ = Nonedef install_importhook():    global _real__import__    import __builtin__    if _real__import__ is None:        _real__import__ = __builtin__.__import__        __builtin__.__import__ = my__import__def uninstall_importhook():    global _real__import__    if _real__import__ is not None:        import __builtin__        __builtin__.__import__ = _real__import__        _real__import__ = None_progress = 0def importing(module):    global _progress    Qd.SetPort(splash)    Qd.TextFont(Fm.GetFNum("Geneva"))    Qd.TextSize(9)    rect = (85, 270, 415, 286)    Qd.RGBForeColor((65535,65535,65535))    if module:        TE.TETextBox('Importing: ' + module, rect, 0)        if not _progress:            Qd.FrameRect((85, 286, 415, 294))        pos = min(86 + 330 * _progress / 77, 414)        Qd.PaintRect((86, 287, pos, 293))        _progress = _progress + 1    else:        Qd.EraseRect(rect)        Qd.PaintRect((86, 287, pos, 293))    Qd.RGBForeColor((0,0,0))def my__import__(name, globals=None, locals=None, fromlist=None):    try:        return sys.modules[name]    except KeyError:        try:            importing(name)        except:            try:                rv = _real__import__(name, globals, locals, fromlist)            finally:                uninstall_importhook()            return rv        return _real__import__(name, globals, locals, fromlist)install_importhook()kHighLevelEvent = 23import Winfrom Fonts import *from QuickDraw import *from TextEdit import *import string_keepsplashscreenopen = 0abouttext1 = """Macstodon %sA basic Mastodon client for Classic Mac OSby Scott Small, @smallsco@oldbytes.spaceGitHub: https://github.com/smallsco/macstodonIcon and logo design by MhzModels, @mhzmodels@mastodon.artBuilt with MacPython %s%sWritten by Guido van Rossum with Jack Jansen (and others)"""def nl2return(text):    return string.join(string.split(text, '\n'), '\r')def UpdateSplash(drawdialog = 0):    if drawdialog:        splash.DrawDialog()    drawtext()    Win.ValidRect(splash.GetWindowPort().portRect)def drawtext():    Qd.SetPort(splash)    Qd.TextFont(Fm.GetFNum("Geneva"))    Qd.TextSize(9)    Qd.RGBForeColor((65535,65535,65535))    rect = (10, 135, 487, 270)    import __main__    abouttxt = nl2return(abouttext1 % (VERSION, sys.version, sys.copyright))    TE.TETextBox(abouttxt, rect, teJustCenter)    Qd.RGBForeColor((0,0,0))UpdateSplash(1)def wait():    import Evt    from Events import *    global splash    try:        splash    except NameError:        return    Qd.InitCursor()    time = Evt.TickCount()    while _keepsplashscreenopen:        ok, event = Evt.EventAvail(highLevelEventMask)        if ok:            # got apple event, back to mainloop            break        ok, event = Evt.EventAvail(mDownMask | keyDownMask | updateMask)        if ok:            ok, event = Evt.WaitNextEvent(mDownMask | keyDownMask | updateMask, 30)            if ok:                (what, message, when, where, modifiers) = event                if what == updateEvt:                    if Win.WhichWindow(message) == splash:                        UpdateSplash(1)                else:                    break    del splashdef about():    global splash, splashresfile, _keepsplashscreenopen    _keepsplashscreenopen = 1    splash = Dlg.GetNewDialog(468, -1)    splash.DrawDialog()    wait()